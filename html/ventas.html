<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema POS profesional para botiller√≠a - Historial de Ventas">
    <meta name="theme-color" content="#2563eb">
    <title>Historial de Ventas - Botiller√≠a POS</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    
    <!-- Preload Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/pos-style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar" role="navigation" aria-label="Navegaci√≥n principal">
        <div class="navbar-brand">
            <h1>üç∫ Botiller√≠a POS</h1>
        </div>
        <div class="navbar-menu" role="tablist">
            <a href="pos.html" class="nav-btn" role="tab">
                <span class="icon" aria-hidden="true">üí∞</span>
                Punto de Venta
            </a>
            <a href="productos.html" class="nav-btn" role="tab">
                <span class="icon" aria-hidden="true">üì¶</span>
                Productos
            </a>
            <a href="retiros.html" class="nav-btn" role="tab">
                <span class="icon" aria-hidden="true">üì§</span>
                Retiros
            </a>
            <button class="nav-btn active" data-view="ventas" role="tab" aria-selected="true">
                <span class="icon" aria-hidden="true">üìä</span>
                Reportes
            </button>
        </div>
        <div class="navbar-stats" aria-label="Estad√≠sticas del d√≠a">
            <div class="stat-item">
                <span class="stat-label">Ventas Hoy</span>
                <span class="stat-value" id="ventasHoy" aria-live="polite">$0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Retiros Hoy</span>
                <span class="stat-value warning" id="retirosHoy" aria-live="polite">$0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Utilidad Neta</span>
                <span class="stat-value success" id="utilidadNeta" aria-live="polite">$0</span>
            </div>
        </div>
    </nav>

    <!-- Vista: Ventas -->
    <div class="view active">
        <div class="module-header">
            <div class="header-info">
                <h2 class="module-title">üìä Panel de Reportes</h2>
                <p class="module-subtitle">An√°lisis completo de ventas, inventario y rendimiento</p>
            </div>
            <div class="header-actions">
                <button id="exportReports" class="btn-action primary">
                    <span class="btn-icon">üìÑ</span>
                    <span class="btn-text">Exportar</span>
                </button>
                <button id="printReports" class="btn-action secondary">
                    <span class="btn-icon">üñ®Ô∏è</span>
                    <span class="btn-text">Imprimir</span>
                </button>
            </div>
        </div>

        <!-- Panel de Estad√≠sticas Expandidas -->
        <div class="stats-dashboard">
            <div class="stats-grid">
                <div class="stat-card primary">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-content">
                        <h3>Ventas del D√≠a</h3>
                        <div class="stat-number" id="ventasDiaReporte">$0</div>
                        <div class="stat-subtitle">√öltima actualizaci√≥n: <span id="ultimaActualizacion">--</span></div>
                    </div>
                </div>
                <div class="stat-card success">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-content">
                        <h3>Ganancia Bruta</h3>
                        <div class="stat-number" id="gananciaBruta">$0</div>
                        <div class="stat-subtitle">Margen: <span id="margenGanancia">0%</span></div>
                    </div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-content">
                        <h3>Productos Vendidos</h3>
                        <div class="stat-number" id="productosVendidos">0</div>
                        <div class="stat-subtitle">Unidades totales</div>
                    </div>
                </div>
                <div class="stat-card info">
                    <div class="stat-icon">üõí</div>
                    <div class="stat-content">
                        <h3>Transacciones</h3>
                        <div class="stat-number" id="totalTransacciones">0</div>
                        <div class="stat-subtitle">Ticket promedio: <span id="ticketPromedio">$0</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filtros y Controles -->
        <div class="report-controls">
            <div class="filter-section">
                <div class="filter-group">
                    <label>üìÖ Per√≠odo</label>
                    <select id="periodoFilter" class="form-select">
                        <option value="hoy">Hoy</option>
                        <option value="ayer">Ayer</option>
                        <option value="semana">Esta Semana</option>
                        <option value="mes">Este Mes</option>
                        <option value="personalizado">Personalizado</option>
                    </select>
                </div>
                <div class="filter-group" id="fechasPersonalizadas" style="display: none;">
                    <label>Desde</label>
                    <input type="date" id="fechaDesde" class="form-input">
                    <label>Hasta</label>
                    <input type="date" id="fechaHasta" class="form-input">
                </div>
                <div class="filter-group">
                    <label>üí≥ M√©todo de Pago</label>
                    <select id="metodoFilter" class="form-select">
                        <option value="">Todos los m√©todos</option>
                        <option value="efectivo">Efectivo</option>
                        <option value="tarjeta">Tarjeta</option>
                        <option value="transferencia">Transferencia</option>
                    </select>
                </div>
                <div class="filter-group">
                    <button id="aplicarFiltros" class="btn-filter">üîç Aplicar Filtros</button>
                    <button id="limpiarFiltros" class="btn-filter secondary">üóëÔ∏è Limpiar</button>
                </div>
            </div>
        </div>

        <!-- Tabs de Contenido -->
        <div class="report-tabs">
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="ventas">üìä Ventas</button>
                <button class="tab-btn" data-tab="productos">üì¶ Productos</button>
                <button class="tab-btn" data-tab="inventario">üìã Inventario</button>
                <button class="tab-btn" data-tab="graficos">üìà Gr√°ficos</button>
            </div>

            <!-- Tab: Ventas -->
            <div id="tab-ventas" class="tab-content active">
                <div class="content-section">
                    <div class="section-header">
                        <h3>üìã Historial de Ventas</h3>
                        <div class="section-actions">
                            <input type="text" id="searchVentas" placeholder="üîç Buscar por ID o m√©todo..." class="search-input">
                        </div>
                    </div>
                    <div class="table-container">
                        <div class="table-content">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID Venta</th>
                                        <th>üìÖ Fecha y Hora</th>
                                        <th>üí∞ Total</th>
                                        <th>üí≥ M√©todo</th>
                                        <th>üì¶ Productos</th>
                                        <th>üéØ Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="ventasTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab: Productos M√°s Vendidos -->
            <div id="tab-productos" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h3>üèÜ Productos M√°s Vendidos</h3>
                        <div class="section-actions">
                            <select id="topProductosFilter" class="form-select">
                                <option value="10">Top 10</option>
                                <option value="20">Top 20</option>
                                <option value="50">Top 50</option>
                            </select>
                        </div>
                    </div>
                    <div class="productos-ranking">
                        <div class="ranking-grid" id="productosRanking">
                            <!-- Se llena din√°micamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab: Inventario -->
            <div id="tab-inventario" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h3>‚ö†Ô∏è Alertas de Inventario</h3>
                    </div>
                    <div class="inventory-alerts">
                        <div class="alert-section">
                            <h4>üî¥ Stock Cr√≠tico (Agotado)</h4>
                            <div id="stockCritico" class="inventory-list">
                                <!-- Se llena din√°micamente -->
                            </div>
                        </div>
                        <div class="alert-section">
                            <h4>üü° Stock Bajo</h4>
                            <div id="stockBajo" class="inventory-list">
                                <!-- Se llena din√°micamente -->
                            </div>
                        </div>
                        <div class="alert-section">
                            <h4>‚úÖ Stock Normal</h4>
                            <div id="stockNormal" class="inventory-list">
                                <!-- Se llena din√°micamente -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab: Gr√°ficos -->
            <div id="tab-graficos" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h3>üìä An√°lisis Visual</h3>
                    </div>
                    <div class="charts-container">
                        <div class="chart-card">
                            <h4>üìà Ventas por Hora</h4>
                            <div class="chart-placeholder" id="ventasPorHora">
                                <div class="chart-bars" id="horasChart">
                                    <!-- Gr√°fico simple de barras ASCII -->
                                </div>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h4>ü•ß Ventas por Categor√≠a</h4>
                            <div class="chart-placeholder" id="ventasPorCategoria">
                                <div class="category-breakdown" id="categoriaChart">
                                    <!-- Desglose por categor√≠as -->
                                </div>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h4>üí≥ M√©todos de Pago</h4>
                            <div class="chart-placeholder" id="metodosPago">
                                <div class="payment-methods" id="metodosChart">
                                    <!-- Distribuci√≥n de m√©todos de pago -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de detalle de venta -->
    <div id="ventaModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Detalle de Venta</h2>
            <div id="ventaDetail"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/static/js/common.js"></script>
    <script src="/static/pos-app.js"></script>
</body>
</html>